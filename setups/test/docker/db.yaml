# docker-compose file

version: '3.7'

services:
  timescaledb:
    container_name: timescaledb
    image: timescale/timescaledb:latest-pg11 # pg11 so can use AGE graphs
    # remap to 5433 so can run on mac with local db also
    ports:
      - '5433:5432/tcp'
    environment:
      POSTGRES_DB: $PGDATABASE
      POSTGRES_USERNAME: $PGUSER
      POSTGRES_PASSWORD: $PGPASSWORD
    volumes:
      - ../volumes/timescaledb:/var/lib/postgresql/data
    deploy:
      restart_policy:
        condition: on-failure
    networks:
      - ladder99

  # gateway:
  #   container_name: gateway
  #   build:
  #     context: ./packages/neomem-gateway
  #   ports:
  #     - '4000:4000'
  #   # environment:
  #   #   - HOST=neomem
  #   # volumes:
  #   #   - ../volumes/neomem/config:/etc/neomem
  #   networks:
  #     - neomem

networks:
  ladder99:
    name: ladder99
